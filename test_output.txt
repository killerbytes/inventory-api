
> nodejs@1.0.0 test
> cross-env NODE_ENV=test jest src/tests/__tests__/reportsService.integration.test.js

  console.log
    [dotenv@17.2.3] injecting env (7) from .env.test -- tip: ΓÜÖ∩╕Å  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    [dotenv@17.2.3] injecting env (0) from .env.test -- tip: ΓÜÖ∩╕Å  write to custom object with { processEnv: myObject }

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Redis skipped in test environment

      at Object.log (src/utils/redis.js:18:11)

  console.log
    [dotenv@17.2.3] injecting env (0) from .env.test -- tip: ≡ƒöÉ prevent committing .env to code: https://dotenvx.com/precommit

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Database connected (test).

      at log (src/tests/setup.js:8:13)

FAIL src/tests/__tests__/reportsService.integration.test.js
  Reports Service (Integration)
    ├ù should get popular products sorted by transaction count (270 ms)
    ├ù should get profit products with correct calculation (139 ms)
    ├ù should get no sale products (unsold inventory) (127 ms)

  ΓùÅ Reports Service (Integration) ΓÇ║ should get popular products sorted by transaction count

    TypeError: Cannot read properties of undefined (reading 'id')

      108 |     referenceNo: "GR-001",
      109 |     goodReceiptLines: [
    > 110 |       { combinationId: classicShovel.id, quantity: 100, purchasePrice: 100 },
          |                                      ^
      111 |       { combinationId: basicShovel.id, quantity: 100, purchasePrice: 50 },
      112 |       { combinationId: unsoldShovel.id, quantity: 100, purchasePrice: 150 },
      113 |     ],

      at Object.id (src/tests/__tests__/reportsService.integration.test.js:110:38)

  ΓùÅ Reports Service (Integration) ΓÇ║ should get profit products with correct calculation

    TypeError: Cannot read properties of undefined (reading 'id')

      108 |     referenceNo: "GR-001",
      109 |     goodReceiptLines: [
    > 110 |       { combinationId: classicShovel.id, quantity: 100, purchasePrice: 100 },
          |                                      ^
      111 |       { combinationId: basicShovel.id, quantity: 100, purchasePrice: 50 },
      112 |       { combinationId: unsoldShovel.id, quantity: 100, purchasePrice: 150 },
      113 |     ],

      at Object.id (src/tests/__tests__/reportsService.integration.test.js:110:38)

  ΓùÅ Reports Service (Integration) ΓÇ║ should get no sale products (unsold inventory)

    TypeError: Cannot read properties of undefined (reading 'id')

      108 |     referenceNo: "GR-001",
      109 |     goodReceiptLines: [
    > 110 |       { combinationId: classicShovel.id, quantity: 100, purchasePrice: 100 },
          |                                      ^
      111 |       { combinationId: basicShovel.id, quantity: 100, purchasePrice: 50 },
      112 |       { combinationId: unsoldShovel.id, quantity: 100, purchasePrice: 150 },
      113 |     ],

      at Object.id (src/tests/__tests__/reportsService.integration.test.js:110:38)


Summary of failed tests

src\tests\__tests__\reportsService.integration.test.js
  Reports Service (Integration)
    Γ£ò should get popular products sorted by transaction count
    Γ£ò should get profit products with correct calculation
    Γ£ò should get no sale products (unsold inventory)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 3 total
Snapshots:   0 total
Time:        2.563 s, estimated 3 s
Ran all test suites matching src/tests/__tests__/reportsService.integration.test.js.
